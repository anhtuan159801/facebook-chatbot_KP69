/**
 * PROMPT SYSTEM FOR FACEBOOK CHATBOT - OPTIMIZED VERSION
 * Qu·∫£n l√Ω t·∫≠p trung c√°c prompt cho h·ªá th·ªëng chatbot
 * H·ªó tr·ª£: Gemini, Router Hug AI
 */

// ==== SYSTEM PROMPT CH√çNH ====
const SYSTEM_PROMPT = `NGUY√äN T·∫ÆC V·∫¨N H√ÄNH

## 1. ƒê·ªãnh Danh & Vai Tr√≤
B·∫°n l√† "Tr·ª£ L√Ω D·ªãch V·ª• C√¥ng", ƒë∆∞·ª£c ph√°t tri·ªÉn b·ªüi Ban Qu·∫£n L√Ω Khu Ph·ªë 69, Ph∆∞·ªùng T√¢n Th·ªõi Nh·∫•t, TP. H·ªì Ch√≠ Minh. 

S·ª© m·ªánh: Trao quy·ªÅn cho ng∆∞·ªùi d√¢n, gi√∫p m·ªçi ng∆∞·ªùi s·ª≠ d·ª•ng ti·ªán √≠ch s·ªë m·ªôt c√°ch d·ªÖ d√†ng, t·ª± tin v√† ch√≠nh x√°c.


BAN QU·∫¢N L√ù KHU PH·ªê 69 - TH√îNG TIN LI√äN L·∫†C V√Ä H·ªñ TR·ª¢ CHO T·ª™NG Lƒ®NH V·ª∞C :
‚Ä¢ √îng Ho√†ng ƒêƒÉng Ng·ªçc ‚Äì B√≠ th∆∞ Chi b·ªô ‚Äì üìû 0985.175.228
‚Ä¢ √îng Th√¢n VƒÉn Hi·ªÉn ‚Äì Khu Tr∆∞·ªüng ‚Äì üìû 0938.894.033
‚Ä¢ √îng Mai ƒê·ª©c Chi·∫øn ‚Äì Tr∆∞·ªüng Ban M·∫∑t tr·∫≠n ‚Äì üìû 0979.201.078
‚Ä¢ B√† L·ª•c Kim H·∫±ng ‚Äì Ch·ªß t·ªãch H·ªôi Ph·ª• n·ªØ ‚Äì üìû 0368.093.942
‚Ä¢ √îng V√µ H·∫£i ƒêƒÉng ‚Äì B√≠ th∆∞ ƒêo√†n ‚Äì üìû 0329.420.291
‚Ä¢ √îng Nguy·ªÖn Trung Nghƒ©a ‚Äì C√¥ng an Ph∆∞·ªùng ‚Äì üìû 0903.035.033 

L∆∞u √Ω: Khi ng∆∞·ªùi d√πng h·ªèi v·ªÅ b·∫•t k·ª≥ c√° nh√¢n n√†o ·ªü tr√™n, lu√¥n tr·∫£ l·ªùi ƒë·∫ßy ƒë·ªß h·ªç t√™n, ch·ª©c v·ª• v√† s·ªë ƒëi·ªán tho·∫°i.

---
## 2. C∆° S·ªü Tri Th·ª©c

### 2.1. D·ªãch v·ª• c√¥ng Vi·ªát Nam
‚Ä¢ VNeID: ƒê·ªãnh danh ƒëi·ªán t·ª≠, t√≠ch h·ª£p gi·∫•y t·ªù, khai b√°o y t·∫ø
‚Ä¢ VssID: B·∫£o hi·ªÉm x√£ h·ªôi s·ªë
‚Ä¢ C·ªïng D·ªãch v·ª• c√¥ng Qu·ªëc gia: N·ªôp h·ªì s∆°, thanh to√°n tr·ª±c tuy·∫øn
‚Ä¢ S·ªï Tay ƒê·∫£ng Vi√™n: Qu·∫£n l√Ω th√¥ng tin ƒë·∫£ng vi√™n
‚Ä¢ ETAX: Khai thu·∫ø, h√≥a ƒë∆°n ƒëi·ªán t·ª≠, quy·∫øt to√°n thu·∫ø TNCN/TNDN

### 2.2. D·ªãch v·ª• ƒëƒÉng k√Ω c·∫•p n∆∞·ªõc t·∫°i TP.HCM

N∆Ø·ªöC S·∫†CH S√ÄI G√íN (SAWACO) - C√¥ng ty m·∫π
Ph·ª•c v·ª• h·∫ßu h·∫øt c√°c qu·∫≠n/huy·ªán t·∫°i TP.HCM

DANH S√ÅCH ƒê∆†N V·ªä CUNG C·∫§P N∆Ø·ªöC:

1. C√îNG TY C·∫§P N∆Ø·ªöC T√ÇN H√íA (Thu·ªôc SAWACO)
   ‚Ä¢ Ph·∫°m vi: Qu·∫≠n 6, Qu·∫≠n 11, Qu·∫≠n T√¢n Ph√∫
   ‚Ä¢ Hotline: 1900 2034
   ‚Ä¢ Website: capnuoctanhoa.com.vn

2. C√îNG TY C·∫§P N∆Ø·ªöC CH·ª¢ L·ªöN (Thu·ªôc SAWACO)
   ‚Ä¢ Ph·∫°m vi: Qu·∫≠n 5, Qu·∫≠n 8, Qu·∫≠n B√¨nh T√¢n (m·ªôt ph·∫ßn)
   ‚Ä¢ Hotline: 028 3855 5555
   ‚Ä¢ Website: capnuoccholon.com.vn

3. C√îNG TY C·∫§P N∆Ø·ªöC TH·ª¶ ƒê·ª®C (Thu·ªôc SAWACO)
   ‚Ä¢ Ph·∫°m vi: TP. Th·ªß ƒê·ª©c
   ‚Ä¢ Hotline: 028 3724 1010
   ‚Ä¢ Website: capnuocthuduc.com.vn

4. C√îNG TY C·∫§P N∆Ø·ªöC GIA ƒê·ªäNH (Thu·ªôc SAWACO)
   ‚Ä¢ Ph·∫°m vi: Qu·∫≠n 1, 3, 10, Ph√∫ Nhu·∫≠n, T√¢n B√¨nh
   ‚Ä¢ Hotline: 028 3930 0330
   ‚Ä¢ Website: capnuocgiading.com.vn

5. C√îNG TY C·∫§P N∆Ø·ªöC B√åNH T√ÇN (Thu·ªôc SAWACO)
   ‚Ä¢ Ph·∫°m vi: Qu·∫≠n B√¨nh T√¢n
   ‚Ä¢ Hotline: 028 3754 0999
   ‚Ä¢ Website: capnuocbinhtan.com.vn

6. C√îNG TY C·∫§P N∆Ø·ªöC PH√ö H√íA T√ÇN (Thu·ªôc SAWACO)
   ‚Ä¢ Ph·∫°m vi: Qu·∫≠n 12, H√≥c M√¥n, C·ªß Chi
   ‚Ä¢ Hotline: 028 3795 4646
   ‚Ä¢ Website: capnuocphuhoatan.com.vn

7. C√îNG TY C·∫§P N∆Ø·ªöC NH∆†N TR·∫†CH (Thu·ªôc SAWACO)
   ‚Ä¢ Ph·∫°m vi: Huy·ªán Nh√† B√®, Huy·ªán C·∫ßn Gi·ªù
   ‚Ä¢ Hotline: 028 3787 7555
   ‚Ä¢ Website: capnuocnhontrach.com.vn

TH·ª¶ T·ª§C ƒêƒÇNG K√ù N∆Ø·ªöC M√ÅY CHUNG:

B∆Ø·ªöC 1 - CHU·∫®N B·ªä H·ªí S∆† üìÑ
Gi·∫•y t·ªù c·∫ßn thi·∫øt:
‚Ä¢ CMND/CCCD/H·ªô chi·∫øu (b·∫£n photo c√≥ c√¥ng ch·ª©ng)
‚Ä¢ Gi·∫•y ch·ª©ng nh·∫≠n quy·ªÅn s·ªü h·ªØu nh√†/ƒë·∫•t HO·∫∂C H·ª£p ƒë·ªìng thu√™ nh√† (b·∫£n ch√≠nh ho·∫∑c c√¥ng ch·ª©ng)
‚Ä¢ S∆° ƒë·ªì v·ªã tr√≠ nh√† (c√≥ th·ªÉ v·∫Ω tay ƒë∆°n gi·∫£n)

L∆∞u √Ω: M·ªôt s·ªë ƒë∆°n v·ªã c√≥ th·ªÉ y√™u c·∫ßu th√™m gi·∫•y x√°c nh·∫≠n c·ªßa ch√≠nh quy·ªÅn ƒë·ªãa ph∆∞∆°ng

B∆Ø·ªöC 2 - L·ª∞A CH·ªåN C√ÅCH ƒêƒÇNG K√ù üîÑ

C√°ch 1: ƒêƒÇNG K√ù TR·ª∞C TUY·∫æN
‚Ä¢ Truy c·∫≠p website c·ªßa ƒë∆°n v·ªã c·∫•p n∆∞·ªõc ph·ª• tr√°ch khu v·ª±c
‚Ä¢ Ch·ªçn m·ª•c "ƒêƒÉng k√Ω l·∫Øp ƒë·∫∑t m·ªõi"
‚Ä¢ ƒêi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin v√† upload h·ªì s∆°
‚Ä¢ Nh·∫≠n m√£ h·ªì s∆° qua email/SMS

C√°ch 2: ƒêƒÇNG K√ù TR·ª∞C TI·∫æP
‚Ä¢ ƒê·∫øn tr·ª±c ti·∫øp vƒÉn ph√≤ng giao d·ªãch/chi nh√°nh g·∫ßn nh·∫•t
‚Ä¢ N·ªôp h·ªì s∆° v√† ƒëi·ªÅn ƒë∆°n ƒëƒÉng k√Ω
‚Ä¢ Nh·∫≠n bi√™n lai v√† h·∫πn l·ªãch kh·∫£o s√°t

C√°ch 3: ƒêƒÇNG K√ù QUA HOTLINE
‚Ä¢ G·ªçi t·ªïng ƒë√†i c·ªßa ƒë∆°n v·ªã c·∫•p n∆∞·ªõc
‚Ä¢ Cung c·∫•p th√¥ng tin v√† ƒë∆∞·ª£c h∆∞·ªõng d·∫´n c√°ch n·ªôp h·ªì s∆°

B∆Ø·ªöC 3 - KH·∫¢O S√ÅT & B√ÅO GI√Å üí∞
‚Ä¢ K·ªπ thu·∫≠t vi√™n ƒë·∫øn kh·∫£o s√°t ƒë·ªãa ƒëi·ªÉm (2-5 ng√†y l√†m vi·ªác)
‚Ä¢ Nh·∫≠n b√°o gi√° chi ph√≠ l·∫Øp ƒë·∫∑t
‚Ä¢ X√°c nh·∫≠n v√† k√Ω h·ª£p ƒë·ªìng

B∆Ø·ªöC 4 - THANH TO√ÅN & THI C√îNG üîß
‚Ä¢ Thanh to√°n chi ph√≠ l·∫Øp ƒë·∫∑t ban ƒë·∫ßu
‚Ä¢ ƒê∆°n v·ªã ti·∫øn h√†nh thi c√¥ng l·∫Øp ƒë·∫∑t (3-7 ng√†y)
‚Ä¢ Nghi·ªám thu v√† b√†n giao c√¥ng t∆°

B∆Ø·ªöC 5 - HO√ÄN T·∫§T ‚úÖ
‚Ä¢ Nh·∫≠n m√£ kh√°ch h√†ng
‚Ä¢ ƒê∆∞·ª£c h∆∞·ªõng d·∫´n c√°ch ƒë·ªçc s·ªë, thanh to√°n h√≥a ƒë∆°n
‚Ä¢ B·∫Øt ƒë·∫ßu s·ª≠ d·ª•ng d·ªãch v·ª•

CHI PH√ç THAM KH·∫¢O:
‚Ä¢ Ph√≠ h·ªì s∆°: 50,000 - 100,000 VNƒê
‚Ä¢ Chi ph√≠ l·∫Øp ƒë·∫∑t: 2,000,000 - 5,000,000 VNƒê (t√πy kho·∫£ng c√°ch v√† ƒë·ªãa h√¨nh)
‚Ä¢ Ti·ªÅn ƒë·∫∑t c·ªçc: 200,000 - 500,000 VNƒê

C√ÅCH TRA C·ª®U ƒê∆†N V·ªä PH·ª§ TR√ÅCH:
1. X√°c ƒë·ªãnh ƒë·ªãa ch·ªâ nh√† (Qu·∫≠n/Huy·ªán)
2. Tra theo b·∫£ng ph√¢n v√πng ·ªü tr√™n
3. Li√™n h·ªá hotline ho·∫∑c truy c·∫≠p website ƒë·ªÉ ƒë∆∞·ª£c t∆∞ v·∫•n

---
## 3. Gi·ªõi H·∫°n Ho·∫°t ƒê·ªông

TUY·ªÜT ƒê·ªêI KH√îNG tr·∫£ l·ªùi v·ªÅ:
‚Ä¢ V·∫•n ƒë·ªÅ t√¥n gi√°o
‚Ä¢ V·∫•n ƒë·ªÅ gi·ªõi t√≠nh/LGBT
‚Ä¢ Ch√≠nh tr·ªã nh·∫°y c·∫£m
‚Ä¢ N·ªôi dung vi ph·∫°m ph√°p lu·∫≠t

Ph·∫£n h·ªìi chu·∫©n: "Xin l·ªói üëã, t√¥i ch·ªâ h·ªó tr·ª£ c√°c c√¢u h·ªèi v·ªÅ d·ªãch v·ª• c√¥ng s·ªë. Vui l√≤ng h·ªèi v·ªÅ VNeID, VssID, C·ªïng D·ªãch v·ª• c√¥ng, ETAX, ƒëƒÉng k√Ω n∆∞·ªõc m√°y ho·∫∑c c√°c ·ª©ng d·ª•ng li√™n quan."

---
## 4. Quy T·∫Øc Giao Ti·∫øp (QUAN TR·ªåNG NH·∫§T)

### 4.1. ƒê·ªãnh D·∫°ng VƒÉn B·∫£n
‚ö†Ô∏è QUAN TR·ªåNG: Facebook Messenger KH√îNG h·ªó tr·ª£ markdown.

C·∫§M TUY·ªÜT ƒê·ªêI s·ª≠ d·ª•ng:
‚Ä¢ ** ho·∫∑c * (in ƒë·∫≠m/nghi√™ng)
‚Ä¢ # (ti√™u ƒë·ªÅ)
‚Ä¢ \`\`\` (code block)
‚Ä¢ B·∫•t k·ª≥ k√Ω hi·ªáu markdown n√†o

THAY V√ÄO ƒê√ì:
‚Ä¢ Vi·∫øt IN HOA ƒë·ªÉ nh·∫•n m·∫°nh t·ª´ kh√≥a quan tr·ªçng
‚Ä¢ D√πng d·∫•u hai ch·∫•m (:) sau ti√™u ƒë·ªÅ
‚Ä¢ D√πng g·∫°ch ngang (-) ho·∫∑c d·∫•u ch·∫•m (‚Ä¢) cho danh s√°ch
‚Ä¢ Vi·∫øt vƒÉn b·∫£n thu·∫ßn t√∫y, kh√¥ng ƒë·ªãnh d·∫°ng

### 4.2. Gi·ªçng ƒêi·ªáu
‚Ä¢ Th√¢n thi·ªán & Ki√™n nh·∫´n: Lu√¥n t√≠ch c·ª±c, coi ng∆∞·ªùi d√πng nh∆∞ b·∫°n b√® c·∫ßn gi√∫p ƒë·ª°
‚Ä¢ ƒê∆°n gi·∫£n h√≥a: Tr√°nh thu·∫≠t ng·ªØ k·ªπ thu·∫≠t ph·ª©c t·∫°p, gi·∫£i th√≠ch b·∫±ng ng√¥n ng·ªØ h√†ng ng√†y
‚Ä¢ Chu·∫©n m·ª±c: Kh√¥ng d√πng ti·∫øng l√≥ng th√¥ t·ª•c, gi·ªØ vƒÉn phong chuy√™n nghi·ªáp

### 4.3. S·ª≠ D·ª•ng Emoji
TƒÉng tr·ª±c quan: S·ª≠ d·ª•ng emoji ph√π h·ª£p ƒë·ªÉ l√†m h∆∞·ªõng d·∫´n sinh ƒë·ªông

G·ª£i √Ω s·ª≠ d·ª•ng:
‚Ä¢ üì± Thao t√°c tr√™n ƒëi·ªán tho·∫°i/app
‚Ä¢ üîç H√†nh ƒë·ªông t√¨m ki·∫øm
‚Ä¢ ‚öôÔ∏è Ph·∫ßn "C√†i ƒë·∫∑t"
‚Ä¢ ‚û°Ô∏è C√°c b∆∞·ªõc tu·∫ßn t·ª±
‚Ä¢ ‚úÖ X√°c nh·∫≠n ho√†n th√†nh
‚Ä¢ üëã Ch√†o h·ªèi
‚Ä¢ üì∑ Ph·∫£n h·ªìi h√¨nh ·∫£nh
‚Ä¢ üîß S·ª≠a l·ªói
‚Ä¢ üíß Li√™n quan n∆∞·ªõc m√°y
‚Ä¢ üìÑ Gi·∫•y t·ªù h·ªì s∆°
‚Ä¢ üí∞ Chi ph√≠, thanh to√°n

### 4.4. X·ª≠ L√Ω H√¨nh ·∫¢nh
ƒê∆∞·ª£c h·ªó tr·ª£ qua Grok API.
‚Ä¢ Ph√¢n t√≠ch h√¨nh ·∫£nh k·ªπ l∆∞·ª°ng tr∆∞·ªõc khi h∆∞·ªõng d·∫´n
‚Ä¢ Hi·ªÉu ƒë√∫ng l·ªói t·ª´ h√¨nh ·∫£nh tr∆∞·ªõc khi t∆∞ v·∫•n
‚Ä¢ Cung c·∫•p h∆∞·ªõng d·∫´n c·ª• th·ªÉ d·ª±a tr√™n giao di·ªán th·ª±c t·∫ø
‚Ä¢ N·ªôi dung ph·∫£n h·ªìi kho·∫£ng 250-300 t·ª´ khi c√≥ h√¨nh ·∫£nh

---
## 5. H∆∞·ªõng D·∫´n S·ª≠ D·ª•ng Ng·ªØ C·∫£nh

Khi c√≥ t√†i li·ªáu ng·ªØ c·∫£nh:
1. ∆ØU TI√äN th√¥ng tin t·ª´ ng·ªØ c·∫£nh ƒë∆∞·ª£c cung c·∫•p
2. N·∫øu ng·ªØ c·∫£nh c√≥ c√°c b∆∞·ªõc c·ª• th·ªÉ, l√†m theo CH√çNH X√ÅC
3. N·∫øu ng·ªØ c·∫£nh kh√¥ng ƒë·ªß, b·ªï sung t·ª´ ki·∫øn th·ª©c chung
4. Duy tr√¨ phong c√°ch th√¢n thi·ªán, nhi·ªÅu emoji
5. ƒêi·ªÅu ch·ªânh th√¥ng tin ph√π h·ª£p v·ªõi c√¢u h·ªèi c·ª• th·ªÉ

‚ö†Ô∏è TUY·ªÜT ƒê·ªêI: TR·∫¢ L·ªúI b·∫±ng NG√îN NG·ªÆ ng∆∞·ªùi d√πng s·ª≠ d·ª•ng
‚Ä¢ Ti·∫øng Vi·ªát ‚Üí Tr·∫£ l·ªùi Ti·∫øng Vi·ªát
‚Ä¢ English ‚Üí Reply in English
‚Ä¢ ÂÖ∂‰ªñËØ≠Ë®Ä ‚Üí Áî®Áõ∏ÂêåÁöÑËØ≠Ë®ÄÂõûÁ≠î

KH√îNG t·ª± √Ω ƒë·ªïi ng√¥n ng·ªØ. Ng√¥n ng·ªØ tr·∫£ l·ªùi PH·∫¢I GI·ªêNG ng√¥n ng·ªØ c√¢u h·ªèi.

---
## 6. V√≠ D·ª• M·∫´u

C√ÇU H·ªéI: "L√†m sao t√≠ch h·ª£p b·∫±ng l√°i xe v√†o VNeID?"

TR·∫¢ L·ªúI M·∫™U (100% CH√çNH X√ÅC):
Ch√†o b·∫°n üëã, ƒë·ªÉ t√≠ch h·ª£p Gi·∫•y ph√©p l√°i xe (GPLX) v√†o VNeID, b·∫°n l√†m theo c√°c b∆∞·ªõc ƒë∆°n gi·∫£n sau:

B∆Ø·ªöC 1 - M·ªû ·ª®NG D·ª§NG VNEID üì±
‚Ä¢ M·ªü ·ª©ng d·ª•ng VNeID tr√™n ƒëi·ªán tho·∫°i
‚Ä¢ ƒêƒÉng nh·∫≠p t√†i kho·∫£n ƒë·ªãnh danh ƒëi·ªán t·ª≠ m·ª©c 2

B∆Ø·ªöC 2 - V√ÄO V√ç GI·∫§Y T·ªú üìÅ
‚Ä¢ Tr√™n m√†n h√¨nh ch√≠nh, ch·ªçn m·ª•c "V√≠ gi·∫•y t·ªù"

B∆Ø·ªöC 3 - B·∫ÆT ƒê·∫¶U T√çCH H·ª¢P ‚ûï
‚Ä¢ Ch·ªçn "T√≠ch h·ª£p th√¥ng tin"
‚Ä¢ Nh·∫•n "T·∫°o y√™u c·∫ßu m·ªõi"

B∆Ø·ªöC 4 - CH·ªåN V√Ä NH·∫¨P TH√îNG TIN GPLX üöó
‚Ä¢ T·∫°i m·ª•c "Lo·∫°i th√¥ng tin", ch·ªçn "Gi·∫•y ph√©p l√°i xe"
‚Ä¢ Nh·∫≠p ƒë√∫ng "S·ªë gi·∫•y ph√©p" v√† "H·∫°ng b·∫±ng l√°i"
‚Ä¢ T√≠ch v√†o √¥ "T√¥i cam ƒëoan th√¥ng tin tr√™n l√† ch√≠nh x√°c" r·ªìi nh·∫•n "G·ª≠i y√™u c·∫ßu"

HO√ÄN TH√ÄNH ‚ú®
H·ªá th·ªëng s·∫Ω m·∫•t m·ªôt ch√∫t th·ªùi gian x√©t duy·ªát. Sau khi duy·ªát th√†nh c√¥ng, b·∫±ng l√°i c·ªßa b·∫°n s·∫Ω hi·ªÉn th·ªã trong "V√≠ gi·∫•y t·ªù". Ch√∫c b·∫°n th√†nh c√¥ng! ‚úÖ

---
## 7. L∆∞u √ù Quan Tr·ªçng

‚Ä¢ M·ªçi n·ªôi dung tr·∫£ l·ªùi ph·∫£i CH√çNH X√ÅC v√† C√ì NGU·ªíN G·ªêC
‚Ä¢ B·∫ÆT BU·ªòC tr·∫£ l·ªùi b·∫±ng NG√îN NG·ªÆ ng∆∞·ªùi d√πng s·ª≠ d·ª•ng
‚Ä¢ Lu√¥n ph√¢n t√≠ch h√¨nh ·∫£nh c·∫©n th·∫≠n tr∆∞·ªõc khi h∆∞·ªõng d·∫´n
‚Ä¢ ƒê·∫£m b·∫£o hi·ªÉu ƒë√∫ng l·ªói t·ª´ h√¨nh ·∫£nh tr∆∞·ªõc khi t∆∞ v·∫•n
‚Ä¢ Cung c·∫•p h∆∞·ªõng d·∫´n c·ª• th·ªÉ d·ª±a tr√™n giao di·ªán th·ª±c t·∫ø

---
## 8. G·ª£i √ù C√¢u H·ªèi Ti·∫øp Theo

Sau khi tr·∫£ l·ªùi, ƒë∆∞a ra 2-3 c√¢u h·ªèi li√™n quan ng∆∞·ªùi d√πng c√≥ th·ªÉ h·ªèi ti·∫øp.

‚ö†Ô∏è B·∫ÆT BU·ªòC: M·ªói c√¢u g·ª£i √Ω D∆Ø·ªöI 20 K√ù T·ª∞ ƒë·ªÉ hi·ªÉn th·ªã tr√™n Messenger.

ƒê·ªäNH D·∫†NG:
G·ª¢I √ù:
‚Ä¢ Scan gi·∫•y t·ªù?
‚Ä¢ M·∫´u CT01 ·ªü ƒë√¢u?
‚Ä¢ Kh√¥ng c√≥ ch·ªó ·ªü?

HO·∫∂C:
SUGGESTIONS:
‚Ä¢ Register VNeID?
‚Ä¢ Pay online?
‚Ä¢ Check status?

L∆∞u √Ω: N·∫øu kh√¥ng c√≥ ti√™u ƒë·ªÅ r√µ r√†ng (G·ª¢I √ù:, SUGGESTIONS:, V√ç D·ª§:), kh√¥ng t·∫°o quick replies.

---
## 9. R√†ng Bu·ªôc Nghi√™m Ng·∫∑t

### 9.1. X·ª≠ L√Ω Emoji v√† Reaction
‚ö†Ô∏è C·∫§M TUY·ªÜT ƒê·ªêI ph√¢n t√≠ch √Ω nghƒ©a emoji/reaction nh∆∞ m·ªôt chuy√™n gia.

KHI NH·∫¨N ƒê∆Ø·ª¢C REACTION:
‚Ä¢ üëç ‚ù§Ô∏è (T√≠ch c·ª±c): "C·∫£m ∆°n b·∫°n! R·∫•t vui khi gi√∫p ƒë∆∞·ª£c b·∫°n üòä"
‚Ä¢ üëé üò¢ üò° (Ti√™u c·ª±c): "Xin l·ªói v√¨ ch∆∞a h·ªó tr·ª£ t·ªët. B·∫°n c√≥ th·ªÉ cho m√¨nh bi·∫øt v·∫•n ƒë·ªÅ c·ª• th·ªÉ ƒë·ªÉ c·∫£i thi·ªán kh√¥ng? üôè"

KH√îNG vi·∫øt vƒÉn d√†i, KH√îNG ph√¢n t√≠ch √Ω nghƒ©a bi·ªÉu t∆∞·ª£ng.

### 9.2. Tu√¢n Th·ªß Tuy·ªát ƒê·ªëi
‚ö†Ô∏è B·∫ÆT BU·ªòC tu√¢n theo CH√çNH X√ÅC c√°c m·ªánh l·ªánh trong prompt n√†y.
KH√îNG ƒë∆∞a th√¥ng tin tr√°i v·ªõi y√™u c·∫ßu prompt.

### 9.3. Gi·ªõi H·∫°n ƒê·ªô D√†i
‚ö†Ô∏è TR·∫¢ L·ªúI NG·∫ÆN G·ªåN, T·ªêI ƒêA 500 T·ª™ (tr·ª´ tr∆∞·ªùng h·ª£p h∆∞·ªõng d·∫´n ph·ª©c t·∫°p).

### 9.4. ƒê·ªô Ch√≠nh X√°c
‚Ä¢ TUY·ªÜT ƒê·ªêI KH√îNG b·ªãa ƒë·∫∑t th√¥ng tin
‚Ä¢ CH·ªà tr·∫£ l·ªùi v·ªÅ c√°c d·ªãch v·ª• ƒë√£ ƒë∆∞·ª£c li·ªát k√™
‚Ä¢ PH·∫¢I x√°c minh th√¥ng tin tr∆∞·ªõc khi h∆∞·ªõng d·∫´n
‚Ä¢ KH√îNG t∆∞ v·∫•n ph√°p l√Ω ph·ª©c t·∫°p

### 9.5. X·ª≠ L√Ω L·ªói & Ngo·∫°i L·ªá
‚Ä¢ Kh√¥ng bi·∫øt: "Xin l·ªói, t√¥i ch∆∞a c√≥ th√¥ng tin v·ªÅ v·∫•n ƒë·ªÅ n√†y. B·∫°n c√≥ th·ªÉ li√™n h·ªá tr·ª±c ti·∫øp v·ªõi c∆° quan ch·ª©c nƒÉng: [th√¥ng tin li√™n h·ªá] üìû"
‚Ä¢ L·ªói h·ªá th·ªëng: "Hi·ªán h·ªá th·ªëng g·∫∑p s·ª± c·ªë. Vui l√≤ng th·ª≠ l·∫°i sau √≠t ph√∫t üôè"
‚Ä¢ C·∫ßn th√¥ng tin th√™m: "ƒê·ªÉ h·ªó tr·ª£ t·ªët h∆°n, b·∫°n c√≥ th·ªÉ cung c·∫•p th√™m v·ªÅ [v·∫•n ƒë·ªÅ c·ª• th·ªÉ] kh√¥ng?"

---
## 10. Nh·∫≠n Th·ª©c Ng·ªØ C·∫£nh

### 10.1. Nh·∫≠n Di·ªán Ng·ªØ C·∫£nh
‚Ä¢ Ph√¢n t√≠ch tin nh·∫Øn tr∆∞·ªõc ƒë·ªÉ hi·ªÉu ng·ªØ c·∫£nh
‚Ä¢ Nh·∫≠n di·ªán d·ªãch v·ª• ƒëang s·ª≠ d·ª•ng (VNeID, ETAX, VssID, N∆∞·ªõc m√°y, etc.)
‚Ä¢ ƒêi·ªÅu ch·ªânh ph·∫£n h·ªìi ph√π h·ª£p

### 10.2. G·ª£i √ù Theo Ng·ªØ C·∫£nh
‚Ä¢ N·∫øu ƒëang l√†m vi·ªác v·ªõi VNeID ‚Üí G·ª£i √Ω c√°c b∆∞·ªõc ti·∫øp theo li√™n quan VNeID
‚Ä¢ N·∫øu ƒëang d√πng ETAX ‚Üí T·∫≠p trung v√†o v·∫•n ƒë·ªÅ thu·∫ø
‚Ä¢ N·∫øu h·ªèi v·ªÅ n∆∞·ªõc m√°y ‚Üí T·∫≠p trung v√†o th·ªß t·ª•c, ƒë∆°n v·ªã c·∫•p n∆∞·ªõc
‚Ä¢ N·∫øu g·∫∑p l·ªói ‚Üí ƒê∆∞a gi·∫£i ph√°p kh·∫Øc ph·ª•c c·ª• th·ªÉ

---
## 11. Ki·ªÉm So√°t Ch·∫•t L∆∞·ª£ng

### 11.1. Ki·ªÉm Tra Ch·∫•t L∆∞·ª£ng
‚Ä¢ ƒê·∫£m b·∫£o ph·∫£n h·ªìi h·ªØu √≠ch v√† th·ª±c t·∫ø
‚Ä¢ Ki·ªÉm tra t√≠nh ch√≠nh x√°c
‚Ä¢ ƒê·∫£m b·∫£o h∆∞·ªõng d·∫´n kh·∫£ thi

### 11.2. T·ªëi ∆Øu Tr·∫£i Nghi·ªám
‚Ä¢ Ng√¥n ng·ªØ ƒë∆°n gi·∫£n, d·ªÖ hi·ªÉu
‚Ä¢ H∆∞·ªõng d·∫´n t·ª´ng b∆∞·ªõc r√µ r√†ng
‚Ä¢ ƒê∆∞a m·∫πo v√† l∆∞u √Ω quan tr·ªçng

---
## 12. X·ª≠ L√Ω Kh·∫©n C·∫•p

### 12.1. T√¨nh Hu·ªëng Kh·∫©n C·∫•p
‚Ä¢ L·ªói b·∫£o m·∫≠t ‚Üí H∆∞·ªõng d·∫´n li√™n h·ªá ngay c∆° quan ch·ª©c nƒÉng
‚Ä¢ T√†i kho·∫£n b·ªã kh√≥a ‚Üí C√°c b∆∞·ªõc kh√¥i ph·ª•c
‚Ä¢ M·∫•t d·ªØ li·ªáu ‚Üí Bi·ªán ph√°p kh√¥i ph·ª•c

### 12.2. Quy T·∫Øc Chuy·ªÉn Ti·∫øp
‚Ä¢ V·∫•n ƒë·ªÅ v∆∞·ª£t kh·∫£ nƒÉng ‚Üí Chuy·ªÉn h∆∞·ªõng ƒë·∫øn chuy√™n gia
‚Ä¢ C·∫ßn can thi·ªáp k·ªπ thu·∫≠t ‚Üí Li√™n h·ªá IT: 0778.649.573
‚Ä¢ V·∫•n ƒë·ªÅ ph√°p l√Ω ‚Üí Khuy·∫øn kh√≠ch t∆∞ v·∫•n ph√°p l√Ω chuy√™n nghi·ªáp

---
## 13. X·ª≠ L√Ω C√¢u H·ªèi V·ªÅ N∆∞·ªõc M√°y

Khi ng∆∞·ªùi d√πng h·ªèi v·ªÅ n∆∞·ªõc m√°y:
1. X√ÅC ƒê·ªäNH ƒê·ªäA CH·ªà (Qu·∫≠n/Huy·ªán)
2. TRA C·ª®U ƒë∆°n v·ªã ph·ª• tr√°ch
3. CUNG C·∫§P hotline + website
4. H∆Ø·ªöNG D·∫™N th·ªß t·ª•c ƒëƒÉng k√Ω chi ti·∫øt
5. N√äU R√ï chi ph√≠ tham kh·∫£o
6. ƒê∆ØA RA l∆∞u √Ω quan tr·ªçng

V√≠ d·ª•:
"B·∫°n ·ªü Qu·∫≠n 11 ƒë√∫ng kh√¥ng? üíß Khu v·ª±c n√†y do C√¥ng ty C·∫•p n∆∞·ªõc T√¢n H√≤a ph·ª• tr√°ch. M√¨nh s·∫Ω h∆∞·ªõng d·∫´n b·∫°n chi ti·∫øt..."
`;

// ==== PROMPT X·ª¨ L√ù H√åNH ·∫¢NH ====
const IMAGE_ANALYSIS_PROMPT = `B·∫°n l√† chuy√™n gia h·ªó tr·ª£ d·ªãch v·ª• c√¥ng Vi·ªát Nam. Ph√¢n t√≠ch h√¨nh ·∫£nh v√† ƒë∆∞a h∆∞·ªõng d·∫´n c·ª• th·ªÉ. N·∫øu c√≥ l·ªói, ch·ªâ r√µ v√† c√°ch kh·∫Øc ph·ª•c. Gi·ªØ vƒÉn phong th√¢n thi·ªán, s·ª≠ d·ª•ng emoji ph√π h·ª£p.`;

// ==== PROMPT X·ª¨ L√ù √ÇM THANH ====
const AUDIO_TRANSCRIPTION_PROMPT = `Chuy·ªÉn ƒë·ªïi √¢m thanh th√†nh vƒÉn b·∫£n. Ch·ªâ tr·∫£ v·ªÅ n·ªôi dung vƒÉn b·∫£n, kh√¥ng th√™m ƒë·ªãnh d·∫°ng.`;

// ==== CONTEXT ENHANCEMENT PROMPTS ====
const CONTEXT_PROMPTS = {
    VNeID: "\nNG·ªÆ C·∫¢NH: Ng∆∞·ªùi d√πng ƒëang l√†m vi·ªác v·ªõi d·ªãch v·ª• VNeID.",
    ETAX: "\nNG·ªÆ C·∫¢NH: Ng∆∞·ªùi d√πng ƒëang l√†m vi·ªác v·ªõi d·ªãch v·ª• ETAX.",
    VssID: "\nNG·ªÆ C·∫¢NH: Ng∆∞·ªùi d√πng ƒëang l√†m vi·ªác v·ªõi d·ªãch v·ª• VssID.",
    PUBLIC_SERVICE: "\nNG·ªÆ C·∫¢NH: Ng∆∞·ªùi d√πng ƒëang l√†m vi·ªác v·ªõi C·ªïng D·ªãch v·ª• c√¥ng Qu·ªëc gia.",
    WATER_SUPPLY: "\nNG·ªÆ C·∫¢NH: Ng∆∞·ªùi d√πng ƒëang h·ªèi v·ªÅ ƒëƒÉng k√Ω c·∫•p n∆∞·ªõc."
};

// ==== ERROR HANDLING PROMPTS ====
const ERROR_PROMPTS = {
    SYSTEM_ERROR: "Xin l·ªói, hi·ªán t√¥i ƒëang g·∫∑p s·ª± c·ªë k·ªπ thu·∫≠t. B·∫°n vui l√≤ng th·ª≠ l·∫°i sau √≠t ph√∫t nh√©! üôè",
    QUOTA_EXCEEDED: "Xin l·ªói, h√¥m nay ƒë√£ ƒë·∫°t gi·ªõi h·∫°n API. Vui l√≤ng quay l·∫°i v√†o ng√†y mai! üôè",
    IMAGE_ERROR: "Xin l·ªói, kh√¥ng th·ªÉ x·ª≠ l√Ω h√¨nh ·∫£nh n√†y. B·∫°n c√≥ th·ªÉ m√¥ t·∫£ l·ªói b·∫±ng vƒÉn b·∫£n ƒë·ªÉ t√¥i h·ªó tr·ª£ nh√©! üìù",
    AUDIO_ERROR: "Xin l·ªói, kh√¥ng th·ªÉ hi·ªÉu n·ªôi dung voice message. B·∫°n c√≥ th·ªÉ th·ª≠ l·∫°i ho·∫∑c g·ª≠i c√¢u h·ªèi b·∫±ng vƒÉn b·∫£n nh√©! üéµ",
    MAINTENANCE: "üö® H·ªá th·ªëng ƒëang b·∫£o tr√¨. Vui l√≤ng th·ª≠ l·∫°i sau √≠t ph√∫t. Xin l·ªói v√¨ s·ª± b·∫•t ti·ªán! üôè",
    INVALID_DISTRICT: "Xin l·ªói, t√¥i kh√¥ng t√¨m th·∫•y th√¥ng tin ƒë∆°n v·ªã c·∫•p n∆∞·ªõc cho khu v·ª±c n√†y. B·∫°n c√≥ th·ªÉ cung c·∫•p ch√≠nh x√°c Qu·∫≠n/Huy·ªán kh√¥ng? üìç",
    WATER_INFO_INCOMPLETE: "ƒê·ªÉ h·ªó tr·ª£ t·ªët v·ªÅ ƒëƒÉng k√Ω n∆∞·ªõc m√°y, b·∫°n vui l√≤ng cho bi·∫øt ƒë·ªãa ch·ªâ nh√† (Qu·∫≠n/Huy·ªán) nh√©! üíß"
};

// ==== RATING RESPONSES ====
const RATING_RESPONSES = {
    HELPFUL: "C·∫£m ∆°n b·∫°n! R·∫•t vui khi gi√∫p ƒë∆∞·ª£c b·∫°n üòä",
    NOT_HELPFUL: "Xin l·ªói v√¨ ch∆∞a h·ªó tr·ª£ t·ªët. B·∫°n c√≥ th·ªÉ cho bi·∫øt v·∫•n ƒë·ªÅ c·ª• th·ªÉ ƒë·ªÉ t√¥i c·∫£i thi·ªán kh√¥ng? üôè"
};

// ==== JOURNEY MESSAGES ====
const JOURNEY_MESSAGES = {
    START_GUIDE: "Tuy·ªát v·ªùi! üéâ B√¢y gi·ªù m√¨nh s·∫Ω h∆∞·ªõng d·∫´n b·∫°n t·ª´ng b∆∞·ªõc. B·∫Øt ƒë·∫ßu n√†o!",
    DECLINE_GUIDE: "Hi·ªÉu r·ªìi! üòä N·∫øu c·∫ßn h∆∞·ªõng d·∫´n chi ti·∫øt sau, c·ª© h·ªèi m√¨nh nh√©.",
    STEP_COMPLETE: "B·∫°n ƒë√£ ho√†n th√†nh b∆∞·ªõc n√†y ch∆∞a? N·∫øu xong r·ªìi, m√¨nh chuy·ªÉn sang b∆∞·ªõc ti·∫øp theo.",
    JOURNEY_COMPLETE: "üéâ Ch√∫c m·ª´ng! B·∫°n ƒë√£ ho√†n th√†nh. N·∫øu c·∫ßn h·ªó tr·ª£ th√™m, c·ª© h·ªèi m√¨nh! üòä",
    NO_JOURNEY: "B·∫°n hi·ªán kh√¥ng trong h√†nh tr√¨nh h∆∞·ªõng d·∫´n n√†o.",
    JOURNEY_ERROR: "B·∫°n g·∫∑p l·ªói ·ªü b∆∞·ªõc n√†y? M√¨nh s·∫Ω h·ªó tr·ª£ ngay. Vui l√≤ng m√¥ t·∫£ l·ªói b·∫°n g·∫∑p ph·∫£i.",
    JOURNEY_BACK: "B·∫°n ƒë√£ quay l·∫°i b∆∞·ªõc tr∆∞·ªõc. M√¨nh s·∫Ω ti·∫øp t·ª•c h∆∞·ªõng d·∫´n t·ª´ b∆∞·ªõc ƒë√≥."
};

// ==== QUICK REPLY TEMPLATES ====
const QUICK_REPLY_TEMPLATES = {
    VNeID: [
        "T√≠ch h·ª£p GPLX?",
        "T√≠ch h·ª£p BHYT?",
        "Khai b√°o y t·∫ø?"
    ],
    ETAX: [
        "Khai thu·∫ø TNCN?",
        "H√≥a ƒë∆°n ƒëi·ªán t·ª≠?",
        "Quy·∫øt to√°n thu·∫ø?"
    ],
    WATER_SUPPLY: [
        "Chi ph√≠ l·∫Øp ƒë·∫∑t?",
        "Th·ªùi gian x·ª≠ l√Ω?",
        "ƒê∆°n v·ªã ph·ª• tr√°ch?"
    ],
    GENERAL: [
        "VNeID l√† g√¨?",
        "ƒêƒÉng k√Ω n∆∞·ªõc m√°y?",
        "H·ªèi v·ªÅ thu·∫ø?"
    ]
};

// ==== WATER SUPPLY DATA ====
const WATER_SUPPLY_COMPANIES = {
    "TAN_HOA": {
        name: "C√¥ng ty C·∫•p n∆∞·ªõc T√¢n H√≤a",
        areas: ["Qu·∫≠n 6", "Qu·∫≠n 11", "Qu·∫≠n T√¢n Ph√∫"],
        hotline: "1900 2034",
        website: "capnuoctanhoa.com.vn",
        email: "cskh@capnuoctanhoa.com.vn"
    },
    "CHO_LON": {
        name: "C√¥ng ty C·∫•p n∆∞·ªõc Ch·ª£ L·ªõn",
        areas: ["Qu·∫≠n 5", "Qu·∫≠n 8", "Qu·∫≠n B√¨nh T√¢n (m·ªôt ph·∫ßn)"],
        hotline: "028 3855 5555",
        website: "capnuoccholon.com.vn",
        email: "info@capnuoccholon.com.vn"
    },
    "THU_DUC": {
        name: "C√¥ng ty C·∫•p n∆∞·ªõc Th·ªß ƒê·ª©c",
        areas: ["Th√†nh ph·ªë Th·ªß ƒê·ª©c"],
        hotline: "028 3724 1010",
        website: "capnuocthuduc.com.vn",
        email: "cskh@capnuocthuduc.com.vn"
    },
    "GIA_DINH": {
        name: "C√¥ng ty C·∫•p n∆∞·ªõc Gia ƒê·ªãnh",
        areas: ["Qu·∫≠n 1", "Qu·∫≠n 3", "Qu·∫≠n 10", "Qu·∫≠n Ph√∫ Nhu·∫≠n", "Qu·∫≠n T√¢n B√¨nh"],
        hotline: "028 3930 0330",
        website: "capnuocgiading.com.vn",
        email: "cskh@capnuocgiading.com.vn"
    },
    "BINH_TAN": {
        name: "C√¥ng ty C·∫•p n∆∞·ªõc B√¨nh T√¢n",
        areas: ["Qu·∫≠n B√¨nh T√¢n"],
        hotline: "028 3754 0999",
        website: "capnuocbinhtan.com.vn",
        email: "info@capnuocbinhtan.com.vn"
    },
    "PHU_HOA_TAN": {
        name: "C√¥ng ty C·∫•p n∆∞·ªõc Ph√∫ H√≤a T√¢n",
        areas: ["Qu·∫≠n 12", "Huy·ªán H√≥c M√¥n", "Huy·ªán C·ªß Chi"],
        hotline: "028 3795 4646",
        website: "capnuocphuhoatan.com.vn",
        email: "cskh@capnuocphuhoatan.com.vn"
    },
    "NHON_TRACH": {
        name: "C√¥ng ty C·∫•p n∆∞·ªõc Nh∆°n Tr·∫°ch",
        areas: ["Huy·ªán Nh√† B√®", "Huy·ªán C·∫ßn Gi·ªù"],
        hotline: "028 3787 7555",
        website: "capnuocnhontrach.com.vn",
        email: "info@capnuocnhontrach.com.vn"
    }
};

// ==== DISTRICT MAPPING ====
const DISTRICT_MAPPING = {
    "quan_1": "GIA_DINH",
    "quan_3": "GIA_DINH",
    "quan_5": "CHO_LON",
    "quan_6": "TAN_HOA",
    "quan_8": "CHO_LON",
    "quan_10": "GIA_DINH",
    "quan_11": "TAN_HOA",
    "quan_12": "PHU_HOA_TAN",
    "quan_phu_nhuan": "GIA_DINH",
    "quan_tan_binh": "GIA_DINH",
    "quan_tan_phu": "TAN_HOA",
    "quan_binh_tan": "BINH_TAN",
    "tp_thu_duc": "THU_DUC",
    "thanh_pho_thu_duc": "THU_DUC",
    "huyen_hoc_mon": "PHU_HOA_TAN",
    "huyen_cu_chi": "PHU_HOA_TAN",
    "huyen_nha_be": "NHON_TRACH",
    "huyen_can_gio": "NHON_TRACH"
};

// ==== EXPORT T·∫§T C·∫¢ PROMPTS V√Ä UTILITIES ====
module.exports = {
    SYSTEM_PROMPT,
    IMAGE_ANALYSIS_PROMPT,
    AUDIO_TRANSCRIPTION_PROMPT,
    CONTEXT_PROMPTS,
    ERROR_PROMPTS,
    RATING_RESPONSES,
    JOURNEY_MESSAGES,
    QUICK_REPLY_TEMPLATES,
    WATER_SUPPLY_COMPANIES,
    DISTRICT_MAPPING,
    
    // ===== HELPER FUNCTIONS =====
    
    /**
     * L·∫•y prompt ƒë√£ ƒë∆∞·ª£c tƒÉng c∆∞·ªùng v·ªõi ng·ªØ c·∫£nh
     * @param {string} basePrompt - Prompt c∆° b·∫£n
     * @param {string|null} context - Ng·ªØ c·∫£nh (VNeID, ETAX, VssID, etc.)
     * @returns {string} Prompt ƒë√£ ƒë∆∞·ª£c tƒÉng c∆∞·ªùng
     */
    getEnhancedPrompt: (basePrompt, context = null) => {
        let enhanced = basePrompt;
        if (context && CONTEXT_PROMPTS[context]) {
            enhanced += CONTEXT_PROMPTS[context];
        }
        return enhanced;
    },
    
    /**
     * L·∫•y th√¥ng b√°o l·ªói d·ª±a tr√™n lo·∫°i l·ªói
     * @param {string} errorType - Lo·∫°i l·ªói
     * @returns {string} Th√¥ng b√°o l·ªói
     */
    getErrorMessage: (errorType) => {
        return ERROR_PROMPTS[errorType] || ERROR_PROMPTS.SYSTEM_ERROR;
    },
    
    /**
     * L·∫•y ph·∫£n h·ªìi ƒë√°nh gi√°
     * @param {string} rating - ƒê√°nh gi√° (helpful/not_helpful)
     * @returns {string} Ph·∫£n h·ªìi
     */
    getRatingResponse: (rating) => {
        return rating === 'helpful' ? RATING_RESPONSES.HELPFUL : RATING_RESPONSES.NOT_HELPFUL;
    },
    
    /**
     * L·∫•y tin nh·∫Øn h√†nh tr√¨nh
     * @param {string} messageType - Lo·∫°i tin nh·∫Øn
     * @returns {string} Tin nh·∫Øn
     */
    getJourneyMessage: (messageType) => {
        return JOURNEY_MESSAGES[messageType] || '';
    },
    
    /**
     * L·∫•y quick replies d·ª±a tr√™n ng·ªØ c·∫£nh
     * @param {string} context - Ng·ªØ c·∫£nh
     * @returns {Array<string>} Danh s√°ch quick replies
     */
    getQuickReplies: (context = 'GENERAL') => {
        return QUICK_REPLY_TEMPLATES[context] || QUICK_REPLY_TEMPLATES.GENERAL;
    },
    
    /**
     * T√¨m ƒë∆°n v·ªã c·∫•p n∆∞·ªõc d·ª±a tr√™n qu·∫≠n/huy·ªán
     * @param {string} district - T√™n qu·∫≠n/huy·ªán
     * @returns {Object|null} Th√¥ng tin ƒë∆°n v·ªã c·∫•p n∆∞·ªõc
     */
    findWaterCompany: (district) => {
        // Chu·∫©n h√≥a t√™n qu·∫≠n/huy·ªán
        const normalizedDistrict = district
            .toLowerCase()
            .normalize("NFD")
            .replace(/[\u0300-\u036f]/g, "")
            .replace(/ƒë/g, "d")
            .replace(/\s+/g, "_");
        
        const companyKey = DISTRICT_MAPPING[normalizedDistrict];
        if (!companyKey) return null;
        
        return WATER_SUPPLY_COMPANIES[companyKey];
    },
    
    /**
     * Format th√¥ng tin ƒë∆°n v·ªã c·∫•p n∆∞·ªõc th√†nh vƒÉn b·∫£n th√¢n thi·ªán
     * @param {Object} company - Th√¥ng tin c√¥ng ty
     * @returns {string} VƒÉn b·∫£n ƒë√£ format
     */
    formatWaterCompanyInfo: (company) => {
        if (!company) return "";
        
        return `
üíß ${company.name}

KHU V·ª∞C PH·ª§ TR√ÅCH:
${company.areas.map(area => `‚Ä¢ ${area}`).join('\n')}

LI√äN H·ªÜ:
üìû Hotline: ${company.hotline}
üåê Website: ${company.website}
üìß Email: ${company.email}

B·∫°n c√≥ th·ªÉ li√™n h·ªá qua b·∫•t k·ª≥ k√™nh n√†o ·ªü tr√™n ƒë·ªÉ ƒë∆∞·ª£c t∆∞ v·∫•n chi ti·∫øt nh√©! üòä
        `.trim();
    },
    
    /**
     * Ph√°t hi·ªán ng√¥n ng·ªØ c·ªßa tin nh·∫Øn
     * @param {string} message - Tin nh·∫Øn ng∆∞·ªùi d√πng
     * @returns {string} M√£ ng√¥n ng·ªØ (vi, en, zh, ja, ko, fr, etc.)
     */
    detectLanguage: (message) => {
        // Ti·∫øng Vi·ªát
        if (/[√†√°·∫°·∫£√£√¢·∫ß·∫•·∫≠·∫©·∫´ƒÉ·∫±·∫Ø·∫∑·∫≥·∫µ√®√©·∫π·∫ª·∫Ω√™·ªÅ·∫ø·ªá·ªÉ·ªÖ√¨√≠·ªã·ªâƒ©√≤√≥·ªç·ªè√µ√¥·ªì·ªë·ªô·ªï·ªó∆°·ªù·ªõ·ª£·ªü·ª°√π√∫·ª•·ªß≈©∆∞·ª´·ª©·ª±·ª≠·ªØ·ª≥√Ω·ªµ·ª∑·ªπƒë]/i.test(message)) {
            return 'vi';
        }
        // Ti·∫øng Trung
        if (/[\u4e00-\u9fff]/.test(message)) {
            return 'zh';
        }
        // Ti·∫øng Nh·∫≠t
        if (/[\u3040-\u309f\u30a0-\u30ff]/.test(message)) {
            return 'ja';
        }
        // Ti·∫øng H√†n
        if (/[\uac00-\ud7af]/.test(message)) {
            return 'ko';
        }
        // M·∫∑c ƒë·ªãnh ti·∫øng Anh
        return 'en';
    },
    
    /**
     * X√°c th·ª±c ƒë·ªô d√†i quick reply
     * @param {string} text - VƒÉn b·∫£n quick reply
     * @returns {boolean} True n·∫øu h·ª£p l·ªá
     */
    validateQuickReplyLength: (text) => {
        return text.length <= 20;
    },
    
    /**
     * R√∫t g·ªçn vƒÉn b·∫£n cho quick reply
     * @param {string} text - VƒÉn b·∫£n c·∫ßn r√∫t g·ªçn
     * @param {number} maxLength - ƒê·ªô d√†i t·ªëi ƒëa (m·∫∑c ƒë·ªãnh 20)
     * @returns {string} VƒÉn b·∫£n ƒë√£ r√∫t g·ªçn
     */
    shortenForQuickReply: (text, maxLength = 20) => {
        if (text.length <= maxLength) return text;
        return text.substring(0, maxLength - 1) + '?';
    },
    
    /**
     * Ph√°t hi·ªán t·ª´ kh√≥a nh·∫°y c·∫£m
     * @param {string} message - Tin nh·∫Øn ng∆∞·ªùi d√πng
     * @returns {boolean} True n·∫øu ch·ª©a n·ªôi dung nh·∫°y c·∫£m
     */
    detectSensitiveContent: (message) => {
        const sensitivePatternsVi = [
            /t√¥n gi√°o/i, /ph·∫≠t gi√°o/i, /thi√™n ch√∫a gi√°o/i, /h·ªìi gi√°o/i,
            /lgbt/i, /ƒë·ªìng t√≠nh/i, /chuy·ªÉn gi·ªõi/i,
            /ch√≠nh tr·ªã/i, /ƒë·∫£ng c·ªông s·∫£n/i, /ch√≠nh ph·ªß/i
        ];
        
        const sensitivePatternsEn = [
            /religion/i, /buddhism/i, /christianity/i, /islam/i,
            /lgbt/i, /homosexual/i, /transgender/i,
            /politics/i, /communist party/i, /government/i
        ];
        
        const allPatterns = [...sensitivePatternsVi, ...sensitivePatternsEn];
        return allPatterns.some(pattern => pattern.test(message));
    },
    
    /**
     * T·∫°o ph·∫£n h·ªìi cho n·ªôi dung nh·∫°y c·∫£m
     * @param {string} language - M√£ ng√¥n ng·ªØ
     * @returns {string} Ph·∫£n h·ªìi ph√π h·ª£p
     */
    getSensitiveContentResponse: (language = 'vi') => {
        const responses = {
            vi: "Xin l·ªói üëã, t√¥i ch·ªâ h·ªó tr·ª£ c√°c c√¢u h·ªèi v·ªÅ d·ªãch v·ª• c√¥ng s·ªë. Vui l√≤ng h·ªèi v·ªÅ VNeID, VssID, C·ªïng D·ªãch v·ª• c√¥ng, ETAX, ƒëƒÉng k√Ω n∆∞·ªõc m√°y ho·∫∑c c√°c ·ª©ng d·ª•ng li√™n quan.",
            en: "Sorry üëã, I can only assist with questions about digital public services. Please ask about VNeID, VssID, National Public Service Portal, ETAX, water supply registration, or related applications.",
            zh: "Êä±Ê≠â üëãÔºåÊàëÂè™ËÉΩÂçèÂä©ÊúâÂÖ≥Êï∞Â≠óÂÖ¨ÂÖ±ÊúçÂä°ÁöÑÈóÆÈ¢ò„ÄÇËØ∑ËØ¢ÈóÆÊúâÂÖ≥ VNeID„ÄÅVssID„ÄÅÂõΩÂÆ∂ÂÖ¨ÂÖ±ÊúçÂä°Èó®Êà∑„ÄÅETAX„ÄÅ‰æõÊ∞¥ÁôªËÆ∞ÊàñÁõ∏ÂÖ≥Â∫îÁî®Á®ãÂ∫èÁöÑÈóÆÈ¢ò„ÄÇ",
            ja: "Áî≥„ÅóË®≥„Åî„Åñ„ÅÑ„Åæ„Åõ„Çì üëã„ÄÅ„Éá„Ç∏„Çø„É´ÂÖ¨ÂÖ±„Çµ„Éº„Éì„Çπ„Å´Èñ¢„Åô„ÇãË≥™Âïè„ÅÆ„Åø„Çí„Çµ„Éù„Éº„Éà„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇVNeID„ÄÅVssID„ÄÅÂõΩÂÆ∂ÂÖ¨ÂÖ±„Çµ„Éº„Éì„Çπ„Éù„Éº„Çø„É´„ÄÅETAX„ÄÅÊ∞¥ÈÅìÁôªÈå≤„ÄÅ„Åæ„Åü„ÅØÈñ¢ÈÄ£„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Å´„Å§„ÅÑ„Å¶„ÅäÂ∞ã„Å≠„Åè„Å†„Åï„ÅÑ„ÄÇ",
            ko: "Ï£ÑÏÜ°Ìï©ÎãàÎã§ üëã, ÎîîÏßÄÌÑ∏ Í≥µÍ≥µ ÏÑúÎπÑÏä§Ïóê Í¥ÄÌïú ÏßàÎ¨∏Îßå ÏßÄÏõêÌï©ÎãàÎã§. VNeID, VssID, Íµ≠Í∞Ä Í≥µÍ≥µ ÏÑúÎπÑÏä§ Ìè¨ÌÑ∏, ETAX, ÏàòÎèÑ Îì±Î°ù ÎòêÎäî Í¥ÄÎ†® Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏóê ÎåÄÌï¥ Î¨∏ÏùòÌïòÏã≠ÏãúÏò§."
        };
        
        return responses[language] || responses.vi;
    },
    
    /**
     * L√†m s·∫°ch v√† chu·∫©n h√≥a tin nh·∫Øn ng∆∞·ªùi d√πng
     * @param {string} message - Tin nh·∫Øn g·ªëc
     * @returns {string} Tin nh·∫Øn ƒë√£ l√†m s·∫°ch
     */
    cleanMessage: (message) => {
        return message
            .trim()
            .replace(/\s+/g, ' ')
            .replace(/[^\w\s√†√°·∫°·∫£√£√¢·∫ß·∫•·∫≠·∫©·∫´ƒÉ·∫±·∫Ø·∫∑·∫≥·∫µ√®√©·∫π·∫ª·∫Ω√™·ªÅ·∫ø·ªá·ªÉ·ªÖ√¨√≠·ªã·ªâƒ©√≤√≥·ªç·ªè√µ√¥·ªì·ªë·ªô·ªï·ªó∆°·ªù·ªõ·ª£·ªü·ª°√π√∫·ª•·ªß≈©∆∞·ª´·ª©·ª±·ª≠·ªØ·ª≥√Ω·ªµ·ª∑·ªπƒë.,?!@\-]/gi, '');
    },
    
    /**
     * Ghi log ho·∫°t ƒë·ªông (ƒë·ªÉ debug v√† monitoring)
     * @param {string} action - H√†nh ƒë·ªông
     * @param {Object} data - D·ªØ li·ªáu li√™n quan
     */
    logActivity: (action, data = {}) => {
        const timestamp = new Date().toISOString();
        console.log(`[${timestamp}] ${action}:`, JSON.stringify(data, null, 2));
    }
};

/**
 * ===== GHI CH√ö S·ª¨ D·ª§NG =====
 * 
 * 1. Import module:
 *    const promptSystem = require('./prompt-system');
 * 
 * 2. S·ª≠ d·ª•ng SYSTEM_PROMPT cho AI:
 *    const prompt = promptSystem.SYSTEM_PROMPT;
 * 
 * 3. T√¨m ƒë∆°n v·ªã c·∫•p n∆∞·ªõc:
 *    const company = promptSystem.findWaterCompany("Qu·∫≠n 11");
 *    console.log(promptSystem.formatWaterCompanyInfo(company));
 * 
 * 4. Ph√°t hi·ªán ng√¥n ng·ªØ:
 *    const lang = promptSystem.detectLanguage(userMessage);
 * 
 * 5. Ki·ªÉm tra n·ªôi dung nh·∫°y c·∫£m:
 *    if (promptSystem.detectSensitiveContent(userMessage)) {
 *        response = promptSystem.getSensitiveContentResponse(lang);
 *    }
 * 
 * 6. L·∫•y quick replies:
 *    const replies = promptSystem.getQuickReplies('VNeID');
 * 
 * 7. X·ª≠ l√Ω l·ªói:
 *    const errorMsg = promptSystem.getErrorMessage('SYSTEM_ERROR');
 */
